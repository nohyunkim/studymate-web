<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>{{ study.title }} - ìŠ¤í„°ë”” ë©”ì´íŠ¸</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>

<body>

<header>
    <div class="nav-container">
        <a href="{{ url_for('index') }}" class="logo">STUDY MATE</a>

        <nav class="nav-menu">
            <a href="{{ url_for('index') }}">í™ˆ</a>
            <a href="{{ url_for('study') }}">ìŠ¤í„°ë”” ì°¾ê¸°</a>

            {% if user_nickname %}
            <div class="user-dropdown">
                <button class="user-btn" onclick="toggleDropdown()">
                    {{ user_nickname }} <span class="arrow">â–¾</span>
                </button>

                <div class="dropdown-menu" id="dropdownMenu">
                    <a href="#">ë§ˆì´í˜ì´ì§€</a>
                    <a href="#">ë‚´ê°€ ì“´ ê¸€</a>
                    <hr>
                    <a href="{{ url_for('logout') }}">ë¡œê·¸ì•„ì›ƒ</a>
                </div>
            </div>
            {% else %}
                <a href="{{ url_for('login') }}">ë¡œê·¸ì¸</a>
            {% endif %}
        </nav>
    </div>
</header>

<main>
    <section>
        <h2>{{ study.title }}</h2>

        <p style="color:#666; margin-bottom: 10px;">
            ğŸ‘‘ {{ study.writer }} Â· ğŸ‘¥ {{ study.member_count }}ëª… ëª¨ì§‘
        </p>

        <span class="tag">{{ study.category }}</span>

        <hr style="margin: 30px 0;">

        <!-- ğŸ“Œ ìŠ¤í„°ë”” ë³¸ë¬¸ -->
        <p style="white-space: pre-line; font-size: 15px; line-height: 1.7;">
            {{ study.content }}
        </p>

        <!-- ì‘ì„±ìë§Œ ë³´ì´ëŠ” ìˆ˜ì •/ì‚­ì œ ë²„íŠ¼ -->
        {% if user_nickname == study.writer %}
        <div class="action-buttons">
            <a href="{{ url_for('study_edit', study_id=study.id) }}" class="btn-edit">
                ìˆ˜ì •
            </a>

            <a href="{{ url_for('study_delete', study_id=study.id) }}"
            class="btn-delete"
            onclick="return confirm('ì •ë§ë¡œ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?');">
                ì‚­ì œ
            </a>
        </div>
        {% endif %}
    </section>
</main>

<footer>
    <p>Â© 2026 Study Mate. Designed by ê¹€ë…¸í˜„</p>
</footer>

<script>
    function toggleDropdown() {
        const menu = document.getElementById('dropdownMenu');
        menu.style.display = menu.style.display === 'block' ? 'none' : 'block';
    }

    // ë°”ê¹¥ í´ë¦­ ì‹œ ë‹«ê¸°
    document.addEventListener('click', function (e) {
        const dropdown = document.querySelector('.user-dropdown');
        const menu = document.getElementById('dropdownMenu');

        if (dropdown && !dropdown.contains(e.target)) {
            menu.style.display = 'none';
        }
    });
</script>

</body>
</html>